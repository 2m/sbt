<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ClassLoaders.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt
<span class="keyword">package</span> classpath

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.<span class="delimiter">{</span>URI, URL, URLClassLoader<span class="delimiter">}</span>

<span class="comment">/** This is a starting point for defining a custom ClassLoader.  Override 'doLoadClass' to define
* loading a class that has not yet been loaded.*/</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LoaderBase extends java.net.URLClassLoader with ScalaObject" id="20762">LoaderBase</a><span title="ScalaObject" class="delimiter">(</span><a title="Seq[java.net.URL]" id="621150">urls</a>: <span title="Seq[java.net.URL]">Seq</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621151">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span><span class="delimiter">(</span><a href="#621150" title="Seq[java.net.URL]">urls</a>.<span title="(implicit evidence$1: ClassManifest[java.net.URL])Array[java.net.URL]">toArray</span>, <a href="#621151" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span title="(requirement: Boolean)Unit">require</span><span class="delimiter">(</span><a href="#621151" title="(x$1: AnyRef)Boolean">parent</a> != <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="comment">// included because a null parent is legitimate in Java</span>
	@throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String,resolve: Boolean)Class[_]" id="621144">loadClass</a><span class="delimiter">(</span><a title="String" id="621179">className</a>: <span title="String">String</span>, <a title="Boolean" id="621180">resolve</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="java.lang.Class[_]" id="621194">loaded</a> = <a href="#20762" title="(x$1: java.lang.String)java.lang.Class[_]">findLoadedClass</a><span class="delimiter">(</span><a href="#621179" title="String">className</a><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="java.lang.Class[_ &gt;: _$2 with ?0]" id="621195">found</a> =
			<span title="java.lang.Class[_1601]" class="keyword">if</span><span class="delimiter">(</span><a href="#621194" title="(x$1: AnyRef)Boolean">loaded</a> == <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
				<a href="#621145" title="(className: String)Class[_]">doLoadClass</a><span class="delimiter">(</span><a href="#621179" title="String">className</a><span class="delimiter">)</span>
			<span class="keyword">else</span>
				<a href="#621194" title="java.lang.Class[_]">loaded</a>
			
		<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#621180" title="Boolean">resolve</a><span class="delimiter">)</span>
			<a href="#20762" title="(x$1: java.lang.Class[_])Unit">resolveClass</a><span class="delimiter">(</span><a href="#621195" title="java.lang.Class[_ &gt;: _$2 with ?0]">found</a><span class="delimiter">)</span>
		<a href="#621195" title="java.lang.Class[_ &gt;: _$2 with ?0]">found</a>
	<span class="delimiter">}</span>
	<span class="comment">/** Provides the implementation of finding a class that has not yet been loaded.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(className: String)Class[_]" id="621145">doLoadClass</a><span class="delimiter">(</span><a title="String" id="621204">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>
	<span class="comment">/** Provides access to the default implementation of 'loadClass'.*/</span>
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String)Class[_]" id="621146">defaultLoadClass</a><span class="delimiter">(</span><a title="String" id="621251">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span class="keyword">super</span>.<span title="(x$1: java.lang.String,x$2: Boolean)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621251" title="String">className</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/** Searches self first before delegating to the parent.*/</span>
<span class="keyword">class</span> <a title="class SelfFirstLoader extends sbt.classpath.LoaderBase with ScalaObject" id="20807">SelfFirstLoader</a><span title="ScalaObject" class="delimiter">(</span><a title="Seq[java.net.URL]" id="621274">classpath</a>: <span title="Seq[java.net.URL]">Seq</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621275">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#20762" title="sbt.classpath.LoaderBase">LoaderBase</a><span class="delimiter">(</span><a href="#621274" title="Seq[java.net.URL]">classpath</a>, <a href="#621275" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	@throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String)Class[_]" id="621270">doLoadClass</a><span class="delimiter">(</span><a title="String" id="621277">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="keyword">try</span> <span class="delimiter">{</span> <a href="#20807" title="(x$1: java.lang.String)java.lang.Class[_]">findClass</a><span class="delimiter">(</span><a href="#621277" title="String">className</a><span class="delimiter">)</span> <span class="delimiter">}</span>
		<span class="keyword">catch</span> <span class="delimiter">{</span> <span title="Class[_$3]" class="keyword">case</span> _: <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span> =&gt; <a href="#621146" title="(className: String)Class[_]">defaultLoadClass</a><span class="delimiter">(</span><a href="#621277" title="String">className</a><span class="delimiter">)</span> <span class="delimiter">}</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="keyword">private</span> <span class="keyword">class</span> <a title="class IntermediateLoader extends sbt.classpath.LoaderBase with ScalaObject" id="20756">IntermediateLoader</a><span title="ScalaObject" class="delimiter">(</span><a title="Array[java.net.URL]" id="621323">urls</a>: <span title="Array[java.net.URL]">Array</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621324">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#20762" title="sbt.classpath.LoaderBase">LoaderBase</a><span class="delimiter">(</span><a href="#621323" title="(xs: Array[java.net.URL])scala.collection.mutable.WrappedArray[java.net.URL]">urls</a>, <a href="#621324" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(className: String)Class[_]" id="621319">doLoadClass</a><span class="delimiter">(</span><a title="String" id="621347">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="comment">// if this loader is asked to load an sbt class, it must be because the project we are building is sbt itself,</span>
		 <span class="comment">// so we want to load the version of classes on the project classpath, not the parent</span>
		<span title="java.lang.Class[_1603]" class="keyword">if</span><span class="delimiter">(</span><a href="#621347" title="String">className</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#20769" title="object sbt.classpath.Loaders">Loaders</a>.<a href="#621356" title="=&gt; java.lang.String">SbtPackage</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<a href="#20756" title="(x$1: java.lang.String)java.lang.Class[_]">findClass</a><span class="delimiter">(</span><a href="#621347" title="String">className</a><span class="delimiter">)</span>
		<span class="keyword">else</span>
			<a href="#621146" title="(className: String)Class[_]">defaultLoadClass</a><span class="delimiter">(</span><a href="#621347" title="String">className</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="comment">/** Delegates class loading to `parent` for all classes included by `filter`.  An attempt to load classes excluded by `filter`
* results in a `ClassNotFoundException`.*/</span>
<span class="keyword">class</span> <a title="class FilteredLoader extends java.lang.ClassLoader with ScalaObject" id="20744">FilteredLoader</a><span title="ScalaObject" class="delimiter">(</span><a title="java.lang.ClassLoader" id="615330">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.classpath.ClassFilter" id="615331">filter</a>: <a href="#20687" title="sbt.classpath.ClassFilter">ClassFilter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">(</span><a href="#615330" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span title="(requirement: Boolean)Unit">require</span><span class="delimiter">(</span><a href="#615330" title="(x$1: AnyRef)Boolean">parent</a> != <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(parent: java.lang.ClassLoader,excludePackages: Iterable[String])sbt.classpath.FilteredLoader" id="615324" class="keyword">this</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="615328">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="615329">excludePackages</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#20744" title="FilteredLoader.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#615328" title="java.lang.ClassLoader">parent</a>, <span title="sbt.classpath.ExcludePackagesFilter" class="keyword">new</span> <a href="#20741" title="sbt.classpath.ExcludePackagesFilter">ExcludePackagesFilter</a><span class="delimiter">(</span><a href="#615329" title="Iterable[String]">excludePackages</a><span class="delimiter">)</span><span class="delimiter">)</span>
	
	@throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String,resolve: Boolean)Class[_]" id="615325">loadClass</a><span class="delimiter">(</span><a title="String" id="621427">className</a>: <span title="String">String</span>, <a title="Boolean" id="621428">resolve</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span title="java.lang.Class[?0]" class="keyword">if</span><span class="delimiter">(</span><a href="#615331" title="sbt.classpath.ClassFilter">filter</a>.<a href="#615332" title="(className: String)Boolean">include</a><span class="delimiter">(</span><a href="#621427" title="String">className</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<span class="keyword">super</span>.<span title="(x$1: java.lang.String,x$2: Boolean)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621427" title="String">className</a>, <a href="#621428" title="Boolean">resolve</a><span class="delimiter">)</span>
		<span class="keyword">else</span>
			<span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#621427" title="String">className</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class SelectiveLoader extends java.net.URLClassLoader with ScalaObject" id="20804">SelectiveLoader</a><span title="ScalaObject" class="delimiter">(</span><a title="Array[java.net.URL]" id="621465">urls</a>: <span title="Array[java.net.URL]">Array</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621466">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.classpath.ClassFilter" id="621467">filter</a>: <a href="#20687" title="sbt.classpath.ClassFilter">ClassFilter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span><span class="delimiter">(</span><a href="#621465" title="Array[java.net.URL]">urls</a>, <a href="#621466" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span title="(requirement: Boolean)Unit">require</span><span class="delimiter">(</span><a href="#621466" title="(x$1: AnyRef)Boolean">parent</a> != <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(urls: Array[java.net.URL],parent: java.lang.ClassLoader,includePackages: Iterable[String])sbt.classpath.SelectiveLoader" id="621459" class="keyword">this</a><span class="delimiter">(</span><a title="Array[java.net.URL]" id="621483">urls</a>: <span title="Array[java.net.URL]">Array</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621484">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="621485">includePackages</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#20804" title="SelectiveLoader.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#621483" title="Array[java.net.URL]">urls</a>, <a href="#621484" title="java.lang.ClassLoader">parent</a>, <span title="sbt.classpath.IncludePackagesFilter" class="keyword">new</span> <a href="#20753" title="sbt.classpath.IncludePackagesFilter">IncludePackagesFilter</a><span class="delimiter">(</span><a href="#621485" title="Iterable[String]">includePackages</a><span class="delimiter">)</span><span class="delimiter">)</span>
	
	@throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>ClassNotFoundException<span class="delimiter">]</span><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String,resolve: Boolean)Class[_]" id="621460">loadClass</a><span class="delimiter">(</span><a title="String" id="621501">className</a>: <span title="String">String</span>, <a title="Boolean" id="621502">resolve</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span title="java.lang.Class[_1604]" class="keyword">if</span><span class="delimiter">(</span><a href="#621467" title="sbt.classpath.ClassFilter">filter</a>.<a href="#615332" title="(className: String)Boolean">include</a><span class="delimiter">(</span><a href="#621501" title="String">className</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<span class="keyword">super</span>.<span title="(x$1: java.lang.String,x$2: Boolean)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621501" title="String">className</a>, <a href="#621502" title="Boolean">resolve</a><span class="delimiter">)</span>
		<span class="keyword">else</span>
		<span class="delimiter">{</span>
			<span class="keyword">val</span> <a title="java.lang.Class[_]" id="621520">loaded</a> = <a href="#621466" title="java.lang.ClassLoader">parent</a>.<span title="(x$1: java.lang.String)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621501" title="String">className</a><span class="delimiter">)</span>
			<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#621502" title="Boolean">resolve</a><span class="delimiter">)</span>
				<a href="#20804" title="(x$1: java.lang.Class[_])Unit">resolveClass</a><span class="delimiter">(</span><a href="#621520" title="java.lang.Class[_]">loaded</a><span class="delimiter">)</span>
			<a href="#621520" title="java.lang.Class[_]">loaded</a>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait ClassFilter extends java.lang.Object" id="20687">ClassFilter</a>
<span title="java.lang.Object" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(className: String)Boolean" id="615332">include</a><span class="delimiter">(</span><a title="String" id="621437">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>
<span class="delimiter">}</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PackageFilter extends java.lang.Object with sbt.classpath.ClassFilter with ScalaObject" id="20780">PackageFilter</a><span title="ScalaObject" class="delimiter">(</span><a title="Iterable[String]" id="621557">packages</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#20687" title="sbt.classpath.ClassFilter">ClassFilter</a>
<span class="delimiter">{</span>
	<span title="(requirement: Boolean)Unit">require</span><span class="delimiter">(</span><a href="#621557" title="Iterable[String]">packages</a>.<span title="(p: (String) =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#621565" title="String">_</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(className: String)Boolean" id="621418">matches</a><span class="delimiter">(</span><a title="String" id="621569">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#621557" title="Iterable[String]">packages</a>.<span title="(p: (String) =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#621569" title="String">className</a>.<a href="#621577" title="(x$1: java.lang.String)Boolean">startsWith</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
<span class="keyword">class</span> <a title="class ExcludePackagesFilter extends sbt.classpath.PackageFilter with ScalaObject" id="20741">ExcludePackagesFilter</a><span title="ScalaObject" class="delimiter">(</span><a title="Iterable[String]" id="621423">exclude</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#20780" title="sbt.classpath.PackageFilter">PackageFilter</a><span class="delimiter">(</span><a href="#621423" title="Iterable[String]">exclude</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(className: String)Boolean" id="621422">include</a><span class="delimiter">(</span><a title="String" id="621585">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="#621418" title="(className: String)Boolean">matches</a><span class="delimiter">(</span><a href="#621585" title="String">className</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
<span class="keyword">class</span> <a title="class IncludePackagesFilter extends sbt.classpath.PackageFilter with ScalaObject" id="20753">IncludePackagesFilter</a><span title="ScalaObject" class="delimiter">(</span><a title="Iterable[String]" id="621497">include</a>: <span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#20780" title="sbt.classpath.PackageFilter">PackageFilter</a><span class="delimiter">(</span><a href="#621497" title="Iterable[String]">include</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(className: String)Boolean" id="621496">include</a><span class="delimiter">(</span><a title="String" id="621591">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#621418" title="(className: String)Boolean">matches</a><span class="delimiter">(</span><a href="#621591" title="String">className</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class LazyFrameworkLoader extends sbt.classpath.LoaderBase with ScalaObject" id="20759">LazyFrameworkLoader</a><span title="ScalaObject" class="delimiter">(</span><a title="String" id="621609">runnerClassName</a>: <span title="String">String</span>, <a title="Array[java.net.URL]" id="621610">urls</a>: <span title="Array[java.net.URL]">Array</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>, <a title="java.lang.ClassLoader" id="621611">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="java.lang.ClassLoader" id="621612">grandparent</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span>
	<span class="keyword">extends</span> <a href="#20762" title="sbt.classpath.LoaderBase">LoaderBase</a><span class="delimiter">(</span><a href="#621610" title="(xs: Array[java.net.URL])scala.collection.mutable.WrappedArray[java.net.URL]">urls</a>, <a href="#621611" title="java.lang.ClassLoader">parent</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(className: String)Class[_]" id="621603">doLoadClass</a><span class="delimiter">(</span><a title="String" id="621635">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span title="java.lang.Class[_1606]" class="keyword">if</span><span class="delimiter">(</span><a href="#20769" title="object sbt.classpath.Loaders">Loaders</a>.<a href="#621358" title="(className: String,checkAgainst: String)Boolean">isNestedOrSelf</a><span class="delimiter">(</span><a href="#621635" title="String">className</a>, <a href="#621609" title="String">runnerClassName</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<a href="#20759" title="(x$1: java.lang.String)java.lang.Class[_]">findClass</a><span class="delimiter">(</span><a href="#621635" title="String">className</a><span class="delimiter">)</span>
		<span class="keyword">else</span> <span title="java.lang.Class[_1605]" class="keyword">if</span><span class="delimiter">(</span><a href="#20769" title="object sbt.classpath.Loaders">Loaders</a>.<a href="#621359" title="(className: String)Boolean">isSbtClass</a><span class="delimiter">(</span><a href="#621635" title="String">className</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// we circumvent the parent loader because we know that we want the</span>
			<a href="#621612" title="java.lang.ClassLoader">grandparent</a>.<span title="(x$1: java.lang.String)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621635" title="String">className</a><span class="delimiter">)</span>              <span class="comment">// version of sbt that is currently the builder (not the project being built)</span>
		<span class="keyword">else</span>
			<a href="#621611" title="java.lang.ClassLoader">parent</a>.<span title="(x$1: java.lang.String)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#621635" title="String">className</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.classpath.Loaders" id="20769">Loaders</a>
<span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">val</span> <a title="java.lang.String" id="621356">SbtPackage</a> = <span title="java.lang.String(&quot;sbt.&quot;)" class="string">&quot;sbt.&quot;</span>
	<span class="keyword">def</span> <a title="(className: String,checkAgainst: String)Boolean" id="621358">isNestedOrSelf</a><span class="delimiter">(</span><a title="String" id="621641">className</a>: <span title="String">String</span>, <a title="String" id="621642">checkAgainst</a>: <span title="String">String</span><span class="delimiter">)</span> =
		<a href="#621641" title="(x$1: AnyRef)Boolean">className</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#621642" title="String">checkAgainst</a> || <a href="#621641" title="String">className</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#621642" title="(x$1: Any)java.lang.String">checkAgainst</a> + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
	<span class="keyword">def</span> <a title="(className: String)Boolean" id="621359">isSbtClass</a><span class="delimiter">(</span><a title="String" id="621659">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#621659" title="String">className</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#20769" title="object sbt.classpath.Loaders">Loaders</a>.<a href="#621356" title="=&gt; java.lang.String">SbtPackage</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>